{
  "name": "onecrm-login-i18n-contract",
  "version": "1.2.0",
  "basePath": "/api",
  "responseShape": {
    "success": {
      "status": "success",
      "data": {}
    },
    "error": {
      "status": "error",
      "error_code": "ERR_CODE",
      "message": "ERR_CODE"
    }
  },
  "endpoints": [
    {
      "method": "GET",
      "path": "/setup/admin",
      "auth": "public",
      "responses": {
        "200": {
          "status": "success",
          "data": {
            "exists": true
          }
        },
        "500": {
          "status": "error",
          "error_code": "SYS_INTERNAL_ERROR",
          "message": "SYS_INTERNAL_ERROR"
        },
        "503": {
          "status": "error",
          "error_code": "SYS_MAINTENANCE",
          "message": "SYS_MAINTENANCE"
        }
      }
    },
    {
      "method": "POST",
      "path": "/auth/login",
      "auth": "public",
      "requestBody": {
        "username": "admin",
        "password": "secret_password"
      },
      "responses": {
        "200": {
          "status": "success",
          "data": {
            "accessToken": "atk_xxx",
            "refreshToken": "rtk_xxx",
            "user": {
              "id": "u_001",
              "username": "admin",
              "displayName": "Administrator",
              "roles": ["admin"]
            }
          }
        },
        "400": {
          "status": "error",
          "error_code": "AUTH_MISSING_FIELD",
          "message": "AUTH_MISSING_FIELD"
        },
        "401": {
          "status": "error",
          "error_code": "AUTH_INVALID_CREDENTIALS",
          "message": "AUTH_INVALID_CREDENTIALS"
        },
        "403": {
          "status": "error",
          "error_code": "AUTH_LOCKED",
          "message": "AUTH_LOCKED"
        },
        "429": {
          "status": "error",
          "error_code": "AUTH_RATE_LIMITED",
          "message": "AUTH_RATE_LIMITED"
        }
      }
    },
    {
      "method": "GET",
      "path": "/auth/me",
      "auth": "bearer",
      "responses": {
        "200": {
          "status": "success",
          "data": {
            "id": "u_001",
            "username": "admin",
            "displayName": "Administrator",
            "roles": ["admin"]
          }
        },
        "401": {
          "status": "error",
          "error_code": "AUTH_TOKEN_EXPIRED",
          "message": "AUTH_TOKEN_EXPIRED"
        }
      }
    },
    {
      "method": "POST",
      "path": "/auth/refresh",
      "auth": "public",
      "requestBody": {
        "refreshToken": "rtk_xxx"
      },
      "responses": {
        "200": {
          "status": "success",
          "data": {
            "accessToken": "atk_new",
            "refreshToken": "rtk_new"
          }
        },
        "400": {
          "status": "error",
          "error_code": "AUTH_REFRESH_TOKEN_INVALID",
          "message": "AUTH_REFRESH_TOKEN_INVALID"
        },
        "403": {
          "status": "error",
          "error_code": "AUTH_REFRESH_TOKEN_EXPIRED",
          "message": "AUTH_REFRESH_TOKEN_EXPIRED"
        }
      }
    },
    {
      "method": "POST",
      "path": "/auth/logout",
      "auth": "bearer",
      "requestBody": {
        "refreshToken": "rtk_xxx"
      },
      "responses": {
        "200": {
          "status": "success",
          "data": null
        },
        "400": {
          "status": "error",
          "error_code": "AUTH_REFRESH_TOKEN_INVALID",
          "message": "AUTH_REFRESH_TOKEN_INVALID"
        }
      }
    },
    {
      "method": "POST",
      "path": "/auth/password/reset-link",
      "auth": "public",
      "requestBody": {
        "email": "user@example.com"
      },
      "responses": {
        "200": {
          "status": "success",
          "data": null
        },
        "400": {
          "status": "error",
          "error_code": "AUTH_EMAIL_INVALID",
          "message": "AUTH_EMAIL_INVALID"
        },
        "429": {
          "status": "error",
          "error_code": "AUTH_RATE_LIMITED",
          "message": "AUTH_RATE_LIMITED",
          "retryAfterSeconds": 600
        },
        "500": {
          "status": "error",
          "error_code": "SYS_INTERNAL_ERROR",
          "message": "SYS_INTERNAL_ERROR"
        }
      }
    },
    {
      "method": "POST",
      "path": "/auth/register",
      "auth": "public",
      "requestBody": {
        "name": "John Doe",
        "email": "user@example.com",
        "password": "SecurePass123",
        "confirmPassword": "SecurePass123",
        "termsAccepted": true
      },
      "responses": {
        "201": {
          "status": "success",
          "data": {
            "userId": "usr_abc123",
            "email": "user@example.com",
            "requiresVerification": true
          }
        },
        "400": {
          "status": "error",
          "error_code": "AUTH_PASSWORD_MISMATCH",
          "message": "AUTH_PASSWORD_MISMATCH"
        },
        "409": {
          "status": "error",
          "error_code": "AUTH_EMAIL_EXISTS",
          "message": "AUTH_EMAIL_EXISTS"
        },
        "429": {
          "status": "error",
          "error_code": "AUTH_REGISTER_RATE_LIMITED",
          "message": "AUTH_REGISTER_RATE_LIMITED",
          "retryAfterSeconds": 600
        }
      }
    },
    {
      "method": "POST",
      "path": "/auth/sso/init",
      "auth": "public",
      "requestBody": {
        "provider": "microsoft",
        "redirectUri": "https://app.onecrm.com/sso/callback"
      },
      "responses": {
        "200": {
          "status": "success",
          "data": {
            "authUrl": "https://sso.onecrm.local/microsoft/authorize?...",
            "state": "sso_xxx"
          }
        },
        "400": {
          "status": "error",
          "error_code": "AUTH_SSO_MISSING_PROVIDER",
          "message": "AUTH_SSO_MISSING_PROVIDER"
        },
        "429": {
          "status": "error",
          "error_code": "AUTH_SSO_RATE_LIMITED",
          "message": "AUTH_SSO_RATE_LIMITED",
          "retryAfterSeconds": 60
        }
      }
    },
    {
      "method": "POST",
      "path": "/auth/sso/callback",
      "auth": "public",
      "requestBody": {
        "provider": "microsoft",
        "code": "email:user@company.com",
        "state": "sso_xxx"
      },
      "responses": {
        "200": {
          "status": "success",
          "data": {
            "accessToken": "atk_xxx",
            "refreshToken": "rtk_xxx",
            "user": {
              "id": "usr_abc123",
              "name": "John",
              "email": "user@company.com",
              "avatar": null
            },
            "isNewUser": true
          }
        },
        "400": {
          "status": "error",
          "error_code": "AUTH_SSO_INVALID_STATE",
          "message": "AUTH_SSO_INVALID_STATE"
        },
        "403": {
          "status": "error",
          "error_code": "AUTH_SSO_DOMAIN_NOT_ALLOWED",
          "message": "AUTH_SSO_DOMAIN_NOT_ALLOWED"
        }
      }
    },
    {
      "method": "GET",
      "path": "/i18n/resources",
      "auth": "public",
      "query": {
        "lang": "zh|ja|en (optional)"
      },
      "responses": {
        "200": {
          "status": "success",
          "data": {
            "app": {},
            "auth": {},
            "forget": {},
            "register": {}
          },
          "meta": {
            "version": "v123456789",
            "lang": "ja"
          }
        },
        "304": {},
        "400": {
          "status": "error",
          "error_code": "I18N_LANG_NOT_SUPPORTED",
          "message": "I18N_LANG_NOT_SUPPORTED"
        }
      }
    },
    {
      "method": "POST",
      "path": "/i18n/resources",
      "auth": "bearer-admin",
      "requestBody": {
        "lang": "zh",
        "force": true,
        "items": {
          "AUTH_PANEL_LOGIN_BTN": "登录"
        }
      },
      "responses": {
        "200": {
          "status": "success",
          "data": {
            "processed": 1,
            "success": 1,
            "version": "v123456789"
          }
        },
        "409": {
          "status": "error",
          "error_code": "I18N_KEY_PROTECTED",
          "message": "I18N_KEY_PROTECTED"
        }
      }
    }
  ]
}
